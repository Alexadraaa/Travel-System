βράδυ απαντω σε υπολγοστικη και τεχνολογια υλοποιησης ,παραλληλη ,12 maiou ,ieee


CREATE TABLE Country (
    country_id INT PRIMARY KEY AUTO_INCREMENT,
    country_name VARCHAR(255) NOT NULL,
    continent VARCHAR(255),
    currency VARCHAR(255)
);

CREATE TABLE City (
    city_id INT PRIMARY KEY AUTO_INCREMENT,
    city_name VARCHAR(255) NOT NULL,
    country_id INT,
    latitude DECIMAL(9, 6),
    longitude DECIMAL(9, 6),
    FOREIGN KEY (country_id) REFERENCES Country(country_id) ON DELETE CASCADE
);

CREATE TABLE Location (
    location_id INT PRIMARY KEY AUTO_INCREMENT,
    location_name VARCHAR(255) NOT NULL,
    latitude DECIMAL(9, 6),
    longitude DECIMAL(9, 6),
    country_id INT,
    city_id INT,
    FOREIGN KEY (country_id) REFERENCES Country(country_id) ON DELETE SET NULL,
    FOREIGN KEY (city_id) REFERENCES City(city_id) ON DELETE SET NULL
);

// users of the app

CREATE TABLE User (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    lastname VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    location_id INT,
    address VARCHAR(255) NOT NULL,
    exact_address VARCHAR(255),
    password VARCHAR(255) NOT NULL,
    role ENUM('admin', 'beneficiary', 'partner') NOT NULL,
    FOREIGN KEY (location_id) REFERENCES Location(location_id) ON DELETE SET NULL
);

CREATE TABLE Admin (
    admin_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT UNIQUE,
    role VARCHAR(50),
    phone_number VARCHAR(20),
    status ENUM('active', 'inactive', 'suspended') DEFAULT 'active',
    last_login TIMESTAMP,
    creation_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes TEXT,
    profile_picture VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES User(user_id) ON DELETE CASCADE
);

CREATE TABLE BusinessPartner (
    partner_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT UNIQUE,
    tax_code VARCHAR(255),
    registration_number VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES User(user_id) ON DELETE CASCADE
);

CREATE TABLE Beneficiary (
    beneficiary_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT UNIQUE,
    beneficiary_type ENUM('user', 'service_provider') NOT NULL,
    date_of_birth DATE,
    address VARCHAR(255),
    contact_number VARCHAR(20),
    FOREIGN KEY (user_id) REFERENCES User(user_id) ON DELETE CASCADE
);


CREATE TABLE SimpleUser (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    beneficiary_id INT UNIQUE,
    bistory TEXT,
    privacy_settings TEXT, 
    FOREIGN KEY (beneficiary_id) REFERENCES Beneficiary(beneficiary_id) ON DELETE CASCADE
);

CREATE TABLE ServiceProvider (
    provider_id INT PRIMARY KEY AUTO_INCREMENT,
    beneficiary_id INT UNIQUE,
    languages_spoken VARCHAR(255),
    specialties TEXT,
    certifications TEXT,
    FOREIGN KEY (beneficiary_id) REFERENCES Beneficiary(beneficiary_id) ON DELETE CASCADE
);




CREATE TABLE Businesses (
    business_id INT PRIMARY KEY AUTO_INCREMENT,
    partner_id INT,
    business_name VARCHAR(255) NOT NULL,
    business_type ENUM('Food and Beverage', 'Market', 'Bars', 'Hotels') NOT NULL,
    location VARCHAR(255),
    advertisement_details TEXT,
    FOREIGN KEY (partner_id) REFERENCES BusinessPartners(partner_id) ON DELETE CASCADE
);


CREATE TABLE Membership (
    membership_id INT PRIMARY KEY AUTO_INCREMENT,
    beneficiary_id INT,
    membership_status VARCHAR(255),
    membership_level VARCHAR(255),
    FOREIGN KEY (beneficiary_id) REFERENCES Beneficiary(beneficiary_id) ON DELETE CASCADE
);



CREATE TABLE Card (
    card_id INT PRIMARY KEY,
    user_id INT,
    barcode VARCHAR(50) NOT NULL,
    expiration_date DATE NOT NULL,
    FOREIGN KEY (user_id) REFERENCES Membership(user_id) ON DELETE CASCADE
);


CREATE TABLE Points (
    user_id INT PRIMARY KEY,
    points INT NOT NULL,
    usage_history TEXT,
    available_coupons TEXT,
    card_id INT,
    FOREIGN KEY (card_id) REFERENCES Card(card_id) ON DELETE CASCADE
);



CREATE TABLE Accommodation (
    provider_id INT PRIMARY KEY,
     //location VARCHAR(255),
    location VARCHAR(255),
    num_rooms INT,
    facilities TEXT,
    FOREIGN KEY (provider_id) REFERENCES ServiceProvider(provider_id) ON DELETE CASCADE
);


CREATE TABLE Car (
    provider_id INT PRIMARY KEY,
    //location VARCHAR(255),
    car_model VARCHAR(255),
    year_of_manufacture YEAR,
    car_type ENUM('sedan', 'SUV', 'hatchback', 'convertible'),
    rental_rate DECIMAL(10, 2),
    FOREIGN KEY (provider_id) REFERENCES ServiceProvider(provider_id) ON DELETE CASCADE
);


CREATE TABLE Activity (
    provider_id INT PRIMARY KEY,
    activity_name VARCHAR(255),
    age_requirement INT,
    duration_hours INT,
    activity_description TEXT,
    FOREIGN KEY (provider_id) REFERENCES ServiceProvider(provider_id) ON DELETE CASCADE
);

CREATE TABLE Booking (
    booking_id INT PRIMARY KEY AUTO_INCREMENT,
    booking_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    booking_status ENUM('pending', 'confirmed', 'canceled') NOT NULL ,
    user_id INT,
    provider_id INT,
    booking_details TEXT,
    FOREIGN KEY (user_id) REFERENCES Beneficiery(beneficiery_id) ON DELETE CASCADE,
    FOREIGN KEY (provider_id) REFERENCES ServiceProvider(provider_id) ON DELETE CASCADE
);

CREATE TABLE Review (
    review_id INT PRIMARY KEY AUTO_INCREMENT,
    reviewer_id INT,
    reviewee_id INT,
    rating INT,
    review_text TEXT,
    review_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (reviewer_id) REFERENCES User(user_id) ON DELETE CASCADE,
    FOREIGN KEY (reviewee_id) REFERENCES User(user_id) ON DELETE CASCADE
);

CREATE TABLE ReviewReply (
    reply_id INT PRIMARY KEY AUTO_INCREMENT,
    review_id INT,
    replier_id INT,
    reply_text TEXT,
    reply_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (review_id) REFERENCES Review(review_id) ON DELETE CASCADE,
    FOREIGN KEY (replier_id) REFERENCES User(user_id) ON DELETE CASCADE
);

CREATE TABLE Friendship (
    friendship_id INT PRIMARY KEY AUTO_INCREMENT,
    user1_id INT,
    user2_id INT,
    status ENUM('pending', 'accepted','rejected','ended') NOT NULL DEFAULT 'pending',
    requested_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    accepted_at TIMESTAMP,
    FOREIGN KEY (user1_id) REFERENCES User(user_id) ON DELETE CASCADE,
    FOREIGN KEY (user2_id) REFERENCES User(user_id) ON DELETE CASCADE
);


CREATE TABLE ChatMessage (
    message_id INT PRIMARY KEY AUTO_INCREMENT,
    sender_id INT,
    receiver_id INT,
    message_text TEXT,
    sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (sender_id) REFERENCES Beneficiery(beneficiery_id) ON DELETE CASCADE,
    FOREIGN KEY (receiver_id) REFERENCES Beneficiery(beneficiery_id) ON DELETE CASCADE
);

CREATE TABLE Application (
    application_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    application_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status ENUM('pending', 'accepted', 'rejected') NOT NULL DEFAULT 'pending',
    additional_info TEXT,
    admin_notes TEXT,
    FOREIGN KEY (user_id) REFERENCES SimpleUser(user_id) ON DELETE CASCADE
);